# shalw

## INSTALL

### Prerequesite
- optional : seldon with CBLAS/Lapack
- python
- yao

## RUN

### `bin/script_run_ensemble.py`
this script run the all ensemble experiment. This script is made to be
changed to adapt the experiment.

called by : none

call : `bin/run_exp.py`

parameter set :
- exp_name : name of the experiment (e.g. `02`) and directory where
results are produced (e.g. `data/EXP02/`)
- Nens : size of the ensemble (e.g. 20 for 20 members)
- suff : suffixe of the reference experiment used to generate
observations and background (e.g. `0`)
outputs :
- generated by run_ex.py for each member and for the reference
experiment
- log_0.out : output of reference experiment run 
- log_i.out : output of the member i (i from 1 to Nens) run
- standard output : time of execution of the standard run and all the
members run

### `bin/run_exp.py`
this script run an assimilation (or a reference) experiment. This
script should not be changed to make standard runs.

called by  : [`bin/run_ensemble.py`]

call : `yao92`, `scripts/config`, `make_namelist`, `make_error_coef`, `bin/shalw`
parameter set (`make ./run_exp.py -h` to see how to set parameters) :
- config : set the configuration of the experiment through a class
defined in config.py. The configuration is a class name.
- suff : set the suffix of the name of the outputs of the files
- no-compile : to avoid the compilation of the source.

### `yao92`
It is an external program (see install) used to generate and compile
the source code to produce the executable bin/shalw.

The source code is in the directory `src`.
Source files are:
- shalw.d : modular graph description, describe the size of the
- configuration SZX (number of grid point in x), SZY (number of grid
point in y) and SZT (number of step times).
- shalw.h : all the code needed in the model (other than numerical model)
- *.h : all the code of the numerical model

### `bin/shalw`
This is the executable to run one assimilation (or one assimilation
experiment)

### `script/config`

### `make_namelist`

### `make_error`


